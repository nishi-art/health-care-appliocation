{"ast":null,"code":"import React from'react';import{useState,useEffect}from'react';import{useNavigate,useLocation}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Calender=()=>{const currentYear=new Date().getFullYear();const currentMonth=new Date().getMonth()+1;const years=[currentYear+1,currentYear,currentYear-1,currentYear-2];const months=Array.from({length:12},(_,i)=>i+1);const[selectedYear,setSelectedYear]=useState(JSON.parse(localStorage.getItem('CaCoSeletedYear')||currentYear));const[selectedMonth,setSelectedMonth]=useState(JSON.parse(localStorage.getItem('CaCoSelectedMonth')||currentMonth));const daysInMonth=new Date(selectedYear,selectedMonth,0).getDate();const firstDayOfWeek=new Date(selectedYear,selectedMonth-1,1).getDay();const blanks=Array.from({length:firstDayOfWeek});const[calenderData,setCalenderData]=useState({});const token=localStorage.getItem('token');const location=useLocation();const handleSelectYear=e=>{setSelectedYear(Number(e.target.value));};const handleSelectMonth=e=>{setSelectedMonth(Number(e.target.value));};const navigate=useNavigate();const fetchMonthlyHospitalMemos=async()=>{try{const response=await fetch(\"http://127.0.0.1:8000/users/hospital/list?year=\".concat(selectedYear,\"&month=\").concat(selectedMonth),{headers:{'Authorization':\"Bearer \".concat(token)}});if(!response.ok)throw new Error('カレンダーのデータ取得に失敗しました。');const hospitalMap={};const data=await response.json();data.forEach(item=>{hospitalMap[item.day]=item.hospital;});setCalenderData(hospitalMap);}catch(error){alert(error.message);}};useEffect(()=>{fetchMonthlyHospitalMemos();localStorage.setItem('CaCoSelectedYear',JSON.stringify(selectedYear));localStorage.setItem('CaCoSelectedMonth',JSON.stringify(selectedMonth));},[selectedYear,selectedMonth,location.pathname]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"health-care\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"select-year-month\",children:[/*#__PURE__*/_jsx(\"select\",{className:\"select-year\",size:\"1\",value:selectedYear,onChange:handleSelectYear,children:years.map(year=>/*#__PURE__*/_jsx(\"option\",{value:year,children:year},year))}),/*#__PURE__*/_jsx(\"select\",{className:\"select-month\",size:\"1\",value:selectedMonth,onChange:handleSelectMonth,children:months.map(month=>/*#__PURE__*/_jsx(\"option\",{value:month,children:month},month))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"calender\",children:[blanks.map((_,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"blank\"},\"blank-\".concat(i))),[...Array(daysInMonth)].map((_,i)=>{const dayOfWeek=(firstDayOfWeek+i)%7;let dayClass='day';if(dayOfWeek===0)dayClass+=' sunday';if(dayOfWeek===6)dayClass+=' saturday';return/*#__PURE__*/_jsxs(\"div\",{className:dayClass,onClick:()=>navigate(\"/calender/\".concat(selectedYear,\"/\").concat(selectedMonth,\"/\").concat(i+1)),children:[/*#__PURE__*/_jsx(\"p\",{className:\"day-text\",children:i+1}),/*#__PURE__*/_jsxs(\"p\",{className:\"hospital-schedule\",children:[\"\\uFF1C\\u75C5\\u9662\\uFF1E\",/*#__PURE__*/_jsx(\"br\",{}),calenderData[i+1]||\"なし\"]})]},\"\".concat(dayClass,\"-\").concat(i));})]})]})});};export default Calender;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Calender","currentYear","Date","getFullYear","currentMonth","getMonth","years","months","Array","from","length","_","i","selectedYear","setSelectedYear","JSON","parse","localStorage","getItem","selectedMonth","setSelectedMonth","daysInMonth","getDate","firstDayOfWeek","getDay","blanks","calenderData","setCalenderData","token","location","handleSelectYear","e","Number","target","value","handleSelectMonth","navigate","fetchMonthlyHospitalMemos","response","fetch","concat","headers","ok","Error","hospitalMap","data","json","forEach","item","day","hospital","error","alert","message","setItem","stringify","pathname","children","className","size","onChange","map","year","month","dayOfWeek","dayClass","onClick"],"sources":["C:/Users/ayuto/github/health-care-application/frontend/src/compornent/Calender.js"],"sourcesContent":["import React from 'react'\r\nimport { useState, useEffect } from 'react'\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\n\r\nconst Calender = () => {\r\n    const currentYear = new Date().getFullYear();\r\n    const currentMonth = new Date().getMonth() + 1;\r\n    const years = [currentYear+1, currentYear, currentYear-1, currentYear-2];\r\n    const months = Array.from({length: 12}, (_,i)=>i+1);\r\n    const [selectedYear, setSelectedYear] = useState(\r\n        JSON.parse(localStorage.getItem('CaCoSeletedYear') || currentYear));\r\n    const [selectedMonth, setSelectedMonth] = useState(\r\n        JSON.parse(localStorage.getItem('CaCoSelectedMonth') || currentMonth));\r\n    const daysInMonth = new Date(selectedYear, selectedMonth, 0).getDate();\r\n    const firstDayOfWeek = new Date(selectedYear, selectedMonth -1 , 1).getDay();\r\n    const blanks = Array.from({length: firstDayOfWeek});\r\n    const [calenderData, setCalenderData] = useState({});\r\n    const token = localStorage.getItem('token');\r\n    const location = useLocation();\r\n    const handleSelectYear = (e) => {\r\n        setSelectedYear(Number(e.target.value));\r\n    };\r\n    const handleSelectMonth = (e) => {\r\n        setSelectedMonth(Number(e.target.value));\r\n    };\r\n    const navigate = useNavigate();\r\n    const fetchMonthlyHospitalMemos = async() => {\r\n            try {\r\n                const response = await fetch(`http://127.0.0.1:8000/users/hospital/list?year=${selectedYear}&month=${selectedMonth}`, {\r\n                    headers: {'Authorization': `Bearer ${token}`}\r\n                });\r\n                if (!response.ok) throw new Error('カレンダーのデータ取得に失敗しました。');\r\n                const hospitalMap = {};\r\n                const data = await response.json();\r\n                data.forEach((item) => {\r\n                    hospitalMap[item.day] = item.hospital\r\n                });\r\n                setCalenderData(hospitalMap);\r\n            } catch (error) {\r\n                alert(error.message);\r\n            }\r\n        };\r\n    useEffect(() => {\r\n        fetchMonthlyHospitalMemos();\r\n        localStorage.setItem('CaCoSelectedYear', JSON.stringify(selectedYear));\r\n        localStorage.setItem('CaCoSelectedMonth', JSON.stringify(selectedMonth));\r\n    }, [selectedYear, selectedMonth, location.pathname]);\r\n\r\n\r\n    return (\r\n        <>  \r\n            <div className='health-care'>\r\n                <div className='select-year-month'>\r\n                    <select className='select-year' size='1' value={selectedYear} onChange={handleSelectYear}>\r\n                        {years.map((year) => (\r\n                            <option key={year} value={year}>{year}</option>\r\n                        ))}\r\n                    </select>\r\n                    <select className='select-month' size='1' value={selectedMonth} onChange={handleSelectMonth}>\r\n                        {months.map((month) => (\r\n                            <option key={month} value={month}>{month}</option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n                <div className='calender'>\r\n                    {blanks.map((_, i) => (\r\n                        <div className='blank' key={`blank-${i}`}></div>\r\n                    ))}\r\n                    {[...Array(daysInMonth)].map((_, i) => {\r\n                        const dayOfWeek = (firstDayOfWeek + i) % 7;\r\n                        let dayClass = 'day';\r\n                        if (dayOfWeek === 0) dayClass += ' sunday';\r\n                        if (dayOfWeek === 6) dayClass += ' saturday';\r\n                        return (\r\n                            <div \r\n                            className={dayClass} \r\n                            key={`${dayClass}-${i}`}\r\n                            onClick={() => navigate(`/calender/${selectedYear}/${selectedMonth}/${i + 1}`)}>\r\n                                <p className='day-text'>{i+1}</p>\r\n                                <p className='hospital-schedule'>＜病院＞<br/>{calenderData[i+1] || \"なし\"}</p>\r\n                            </div>\r\n                        )\r\n                    })\r\n                    }\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Calender"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE5D,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACnB,KAAM,CAAAC,WAAW,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC5C,KAAM,CAAAC,YAAY,CAAG,GAAI,CAAAF,IAAI,CAAC,CAAC,CAACG,QAAQ,CAAC,CAAC,CAAG,CAAC,CAC9C,KAAM,CAAAC,KAAK,CAAG,CAACL,WAAW,CAAC,CAAC,CAAEA,WAAW,CAAEA,WAAW,CAAC,CAAC,CAAEA,WAAW,CAAC,CAAC,CAAC,CACxE,KAAM,CAAAM,MAAM,CAAGC,KAAK,CAACC,IAAI,CAAC,CAACC,MAAM,CAAE,EAAE,CAAC,CAAE,CAACC,CAAC,CAACC,CAAC,GAAGA,CAAC,CAAC,CAAC,CAAC,CACnD,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGxB,QAAQ,CAC5CyB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,EAAIjB,WAAW,CAAC,CAAC,CACvE,KAAM,CAACkB,aAAa,CAAEC,gBAAgB,CAAC,CAAG9B,QAAQ,CAC9CyB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,mBAAmB,CAAC,EAAId,YAAY,CAAC,CAAC,CAC1E,KAAM,CAAAiB,WAAW,CAAG,GAAI,CAAAnB,IAAI,CAACW,YAAY,CAAEM,aAAa,CAAE,CAAC,CAAC,CAACG,OAAO,CAAC,CAAC,CACtE,KAAM,CAAAC,cAAc,CAAG,GAAI,CAAArB,IAAI,CAACW,YAAY,CAAEM,aAAa,CAAE,CAAC,CAAG,CAAC,CAAC,CAACK,MAAM,CAAC,CAAC,CAC5E,KAAM,CAAAC,MAAM,CAAGjB,KAAK,CAACC,IAAI,CAAC,CAACC,MAAM,CAAEa,cAAc,CAAC,CAAC,CACnD,KAAM,CAACG,YAAY,CAAEC,eAAe,CAAC,CAAGrC,QAAQ,CAAC,CAAC,CAAC,CAAC,CACpD,KAAM,CAAAsC,KAAK,CAAGX,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAW,QAAQ,CAAGpC,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAqC,gBAAgB,CAAIC,CAAC,EAAK,CAC5BjB,eAAe,CAACkB,MAAM,CAACD,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAC3C,CAAC,CACD,KAAM,CAAAC,iBAAiB,CAAIJ,CAAC,EAAK,CAC7BX,gBAAgB,CAACY,MAAM,CAACD,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAC5C,CAAC,CACD,KAAM,CAAAE,QAAQ,CAAG5C,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAA6C,yBAAyB,CAAG,KAAAA,CAAA,GAAW,CACrC,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,mDAAAC,MAAA,CAAmD3B,YAAY,YAAA2B,MAAA,CAAUrB,aAAa,EAAI,CAClHsB,OAAO,CAAE,CAAC,eAAe,WAAAD,MAAA,CAAYZ,KAAK,CAAE,CAChD,CAAC,CAAC,CACF,GAAI,CAACU,QAAQ,CAACI,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,qBAAqB,CAAC,CACxD,KAAM,CAAAC,WAAW,CAAG,CAAC,CAAC,CACtB,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAClCD,IAAI,CAACE,OAAO,CAAEC,IAAI,EAAK,CACnBJ,WAAW,CAACI,IAAI,CAACC,GAAG,CAAC,CAAGD,IAAI,CAACE,QAAQ,CACzC,CAAC,CAAC,CACFvB,eAAe,CAACiB,WAAW,CAAC,CAChC,CAAE,MAAOO,KAAK,CAAE,CACZC,KAAK,CAACD,KAAK,CAACE,OAAO,CAAC,CACxB,CACJ,CAAC,CACL9D,SAAS,CAAC,IAAM,CACZ8C,yBAAyB,CAAC,CAAC,CAC3BpB,YAAY,CAACqC,OAAO,CAAC,kBAAkB,CAAEvC,IAAI,CAACwC,SAAS,CAAC1C,YAAY,CAAC,CAAC,CACtEI,YAAY,CAACqC,OAAO,CAAC,mBAAmB,CAAEvC,IAAI,CAACwC,SAAS,CAACpC,aAAa,CAAC,CAAC,CAC5E,CAAC,CAAE,CAACN,YAAY,CAAEM,aAAa,CAAEU,QAAQ,CAAC2B,QAAQ,CAAC,CAAC,CAGpD,mBACI7D,IAAA,CAAAI,SAAA,EAAA0D,QAAA,cACI5D,KAAA,QAAK6D,SAAS,CAAC,aAAa,CAAAD,QAAA,eACxB5D,KAAA,QAAK6D,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAC9B9D,IAAA,WAAQ+D,SAAS,CAAC,aAAa,CAACC,IAAI,CAAC,GAAG,CAACzB,KAAK,CAAErB,YAAa,CAAC+C,QAAQ,CAAE9B,gBAAiB,CAAA2B,QAAA,CACpFnD,KAAK,CAACuD,GAAG,CAAEC,IAAI,eACZnE,IAAA,WAAmBuC,KAAK,CAAE4B,IAAK,CAAAL,QAAA,CAAEK,IAAI,EAAxBA,IAAiC,CACjD,CAAC,CACE,CAAC,cACTnE,IAAA,WAAQ+D,SAAS,CAAC,cAAc,CAACC,IAAI,CAAC,GAAG,CAACzB,KAAK,CAAEf,aAAc,CAACyC,QAAQ,CAAEzB,iBAAkB,CAAAsB,QAAA,CACvFlD,MAAM,CAACsD,GAAG,CAAEE,KAAK,eACdpE,IAAA,WAAoBuC,KAAK,CAAE6B,KAAM,CAAAN,QAAA,CAAEM,KAAK,EAA3BA,KAAoC,CACpD,CAAC,CACE,CAAC,EACR,CAAC,cACNlE,KAAA,QAAK6D,SAAS,CAAC,UAAU,CAAAD,QAAA,EACpBhC,MAAM,CAACoC,GAAG,CAAC,CAAClD,CAAC,CAAEC,CAAC,gBACbjB,IAAA,QAAK+D,SAAS,CAAC,OAAO,WAAAlB,MAAA,CAAe5B,CAAC,CAAS,CAClD,CAAC,CACD,CAAC,GAAGJ,KAAK,CAACa,WAAW,CAAC,CAAC,CAACwC,GAAG,CAAC,CAAClD,CAAC,CAAEC,CAAC,GAAK,CACnC,KAAM,CAAAoD,SAAS,CAAG,CAACzC,cAAc,CAAGX,CAAC,EAAI,CAAC,CAC1C,GAAI,CAAAqD,QAAQ,CAAG,KAAK,CACpB,GAAID,SAAS,GAAK,CAAC,CAAEC,QAAQ,EAAI,SAAS,CAC1C,GAAID,SAAS,GAAK,CAAC,CAAEC,QAAQ,EAAI,WAAW,CAC5C,mBACIpE,KAAA,QACA6D,SAAS,CAAEO,QAAS,CAEpBC,OAAO,CAAEA,CAAA,GAAM9B,QAAQ,cAAAI,MAAA,CAAc3B,YAAY,MAAA2B,MAAA,CAAIrB,aAAa,MAAAqB,MAAA,CAAI5B,CAAC,CAAG,CAAC,CAAE,CAAE,CAAA6C,QAAA,eAC3E9D,IAAA,MAAG+D,SAAS,CAAC,UAAU,CAAAD,QAAA,CAAE7C,CAAC,CAAC,CAAC,CAAI,CAAC,cACjCf,KAAA,MAAG6D,SAAS,CAAC,mBAAmB,CAAAD,QAAA,EAAC,0BAAI,cAAA9D,IAAA,QAAI,CAAC,CAAC+B,YAAY,CAACd,CAAC,CAAC,CAAC,CAAC,EAAI,IAAI,EAAI,CAAC,MAAA4B,MAAA,CAHrEyB,QAAQ,MAAAzB,MAAA,CAAI5B,CAAC,CAIhB,CAAC,CAEd,CAAC,CAAC,EAED,CAAC,EACL,CAAC,CACR,CAAC,CAEX,CAAC,CAED,cAAe,CAAAZ,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}