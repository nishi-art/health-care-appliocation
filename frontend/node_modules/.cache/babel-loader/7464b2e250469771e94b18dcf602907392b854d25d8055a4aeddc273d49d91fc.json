{"ast":null,"code":"import _objectSpread from\"C:/Users/ayuto/github/health-care-application/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{checkAuthStatus}from\"./auth\";//ログイン後の認証が必要なAPIリクエストで使用する\nexport const fetchWithAuth=async function(url){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};let navigate=arguments.length>2?arguments[2]:undefined;if(!checkAuthStatus()){localStorage.removeItem('token');navigate('/');return;}const token=localStorage.getItem('token');const headers=_objectSpread(_objectSpread({},options.headers),{},{'Authorization':\"Bearer \".concat(token)});const response=await fetch(url,_objectSpread(_objectSpread({},options),{},{headers}));if(response.status===401){localStorage.removeItem('token');navigate('/');}return response;};","map":{"version":3,"names":["checkAuthStatus","fetchWithAuth","url","options","arguments","length","undefined","navigate","localStorage","removeItem","token","getItem","headers","_objectSpread","concat","response","fetch","status"],"sources":["C:/Users/ayuto/github/health-care-application/frontend/src/utils/authRequest.js"],"sourcesContent":["import { checkAuthStatus } from \"./auth\";\r\n\r\n//ログイン後の認証が必要なAPIリクエストで使用する\r\nexport const fetchWithAuth = async(url, options = {}, navigate) => {\r\n    if (!checkAuthStatus()) {\r\n        localStorage.removeItem('token');\r\n        navigate('/');\r\n        return;\r\n    }\r\n    const token = localStorage.getItem('token');\r\n    const headers = {\r\n        ...options.headers,\r\n        'Authorization': `Bearer ${token}`\r\n    };\r\n    const response = await fetch(url, { ...options, headers });\r\n    if (response.status === 401) {\r\n        localStorage.removeItem('token');\r\n        navigate('/');\r\n    }\r\n    return response;\r\n};"],"mappings":"2IAAA,OAASA,eAAe,KAAQ,QAAQ,CAExC;AACA,MAAO,MAAM,CAAAC,aAAa,CAAG,cAAAA,CAAMC,GAAG,CAA6B,IAA3B,CAAAC,OAAO,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,IAAE,CAAAG,QAAQ,CAAAH,SAAA,CAAAC,MAAA,GAAAD,SAAA,IAAAE,SAAA,CAC1D,GAAI,CAACN,eAAe,CAAC,CAAC,CAAE,CACpBQ,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC,CAChCF,QAAQ,CAAC,GAAG,CAAC,CACb,OACJ,CACA,KAAM,CAAAG,KAAK,CAAGF,YAAY,CAACG,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,OAAO,CAAAC,aAAA,CAAAA,aAAA,IACNV,OAAO,CAACS,OAAO,MAClB,eAAe,WAAAE,MAAA,CAAYJ,KAAK,CAAE,EACrC,CACD,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACd,GAAG,CAAAW,aAAA,CAAAA,aAAA,IAAOV,OAAO,MAAES,OAAO,EAAE,CAAC,CAC1D,GAAIG,QAAQ,CAACE,MAAM,GAAK,GAAG,CAAE,CACzBT,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC,CAChCF,QAAQ,CAAC,GAAG,CAAC,CACjB,CACA,MAAO,CAAAQ,QAAQ,CACnB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}